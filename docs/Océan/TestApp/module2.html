
<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Module 2: Analyse fonctionnelle et cahier des charges</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      tailwind.config = {
        theme: {
          extend: {
            colors: {
              'custom-blue': '#0077cc',
              'custom-green': '#009966',
              'custom-orange': '#ff6600',
              'light-bg': '#f0f9ff', // sky-50
              'dark-text': '#0c4a6e', // sky-900
              'accent-yellow': '#facc15', // yellow-400
            }
          }
        }
      }
    </script>
    <style>
      body {
        scroll-behavior: smooth;
      }
      .prose ul { margin-top: 0.5em; margin-bottom: 0.5em; padding-left: 1.625em; }
      .prose li { margin-top: 0.25em; margin-bottom: 0.25em; }
      .prose-sm { font-size: 0.875rem; line-height: 1.625; }
      .prose-sm p { margin-top: 1em; margin-bottom: 1em; }
      .focus-content {
        max-height: 0;
        overflow: hidden;
        transition: max-height 0.3s ease-out;
      }
      .focus-content.open {
        max-height: 1000px; /* Adjust if content can be very long */
        transition: max-height 0.5s ease-in;
      }
    </style>
<script type="importmap">
{
  "imports": {
    "react": "https://esm.sh/react@^19.1.0",
    "react-dom/": "https://esm.sh/react-dom@^19.1.0/",
    "react/": "https://esm.sh/react@^19.1.0/",
    "@google/genai": "https://esm.sh/@google/genai@^1.0.1"
  }
}
</script>
</head>
<body class="bg-light-bg text-slate-800 font-sans">

    <header class="bg-gradient-to-r from-custom-blue to-sky-500 text-white p-6 shadow-lg sticky top-0 z-50">
        <div class="container mx-auto">
          <h1 class="text-3xl md:text-4xl font-bold tracking-tight">Module 2 : Analyse fonctionnelle et cahier des charges</h1>
          <p class="text-sky-100 mt-1 text-sm md:text-base">Technologie - Classe de 5ème</p>
        </div>
    </header>

    <main class="container mx-auto p-4 md:p-8 space-y-12">
        <div id="introduction-container"></div>
        <div id="sections-container" class="space-y-12"></div>
        <div id="quiz-container"></div>
        <div id="glossary-container"></div>
        <div id="conclusion-container"></div>
    </main>

    <footer class="text-center p-6 bg-slate-800 text-slate-300 text-sm">
        <p>&copy; 2024 Cours de Technologie. Contenu généré à des fins éducatives.</p>
    </footer>

    <script>
        // --- DATA (Copied and adapted from App.tsx) ---
        const introductionData = {
          hook: "Sais-tu comment les ingénieurs transforment une idée géniale, comme le dernier smartphone ou la voiture de tes rêves, en un objet qui fonctionne parfaitement ? Ce n'est pas de la magie ! Ils utilisent une méthode spéciale pour bien comprendre ce que l'objet doit faire, pour qui, et comment. C'est comme être un détective des objets ! On va explorer ensemble comment on décompose un objet complexe, comme ta trottinette électrique, en plein de petites missions simples qu'il doit accomplir. Prêt à découvrir les secrets de la conception ?",
          objectives: [
            "S'approprier un cahier des charges.",
            "Identifier les fonctions techniques d'un objet.",
            "Proposer des solutions techniques pour répondre à des fonctions."
          ],
          knowledge: [
            "Fonction globale (ou fonction d'usage).",
            "Fonctions techniques et solutions techniques.",
            "Cahier des charges fonctionnel (CdCF).",
            "Diagramme 'bête à cornes'.",
            "Diagramme 'pieuvre' (fonctions principales et contraintes)."
          ]
        };

        const sectionsData = [
            {
              id: 'section1',
              title: "Comprendre le besoin : À quoi sert cet objet ? La \"Bête à cornes\"",
              iconName: 'QuestionMarkCircleIcon',
              content: [
                { type: 'paragraph', text: "Avant de créer quoi que ce soit, un inventeur ou un ingénieur se pose une question essentielle : à quel besoin cet objet va-t-il répondre ? Pour y voir clair, on utilise un outil super pratique qui s'appelle la 'bête à cornes'." },
                { type: 'paragraph', text: "Imagine une drôle de bête avec trois questions sur ses cornes :" },
                { type: 'list', items: [
                    "<strong>À qui</strong> l'objet rend-il service ? (C'est l'utilisateur)",
                    "<strong>Sur quoi</strong> l'objet agit-il ? (C'est la matière d'œuvre)",
                    "<strong>Dans quel but</strong> l'objet existe-t-il ? (C'est la fonction globale ou fonction d'usage)"
                ]},
                { type: 'image', src: 'https://picsum.photos/seed/bicorn/600/300', alt: 'Schéma de la bête à cornes' },
              ],
              examples: [
                {
                  title: 'Exemple: Le Smartphone',
                  description: "Un smartphone moderne est un concentré de technologie ! Appliquons la bête à cornes :",
                  items: [
                    "<strong>À qui :</strong> L'utilisateur (toi, tes parents, tes amis...).",
                    "<strong>Sur quoi :</strong> Les informations, les contacts, le divertissement, la communication.",
                    "<strong>Dans quel but :</strong> Permettre à l'utilisateur de communiquer, s'informer, se divertir et gérer des tâches en mobilité."
                  ],
                  image: 'https://picsum.photos/seed/smartphone/300/200'
                },
                {
                  title: 'Exemple: Le Vélo',
                  description: "Même un objet simple comme un vélo a sa raison d'être :",
                  items: [
                    "<strong>À qui :</strong> Le cycliste.",
                    "<strong>Sur quoi :</strong> Le cycliste lui-même (pour le transporter) et le sol (sur lequel il roule).",
                    "<strong>Dans quel but :</strong> Permettre au cycliste de se déplacer d'un point A à un point B en utilisant sa force musculaire (ou une assistance électrique pour les VAE)."
                  ],
                  image: 'https://picsum.photos/seed/velo/300/200'
                }
              ],
              focusPoint: {
                title: "Point Focus : La matière d'œuvre, c'est quoi ?",
                content: "La matière d'œuvre, c'est ce sur quoi l'objet agit pour remplir sa fonction. Pour un stylo, c'est le papier et l'encre. Pour un mixeur, ce sont les aliments ! Pour une trottinette, c'est l'utilisateur (qu'elle transporte) et le sol (sur lequel elle roule)."
              }
            },
            {
              id: 'section2',
              title: "De la mission principale aux petites tâches : Le diagramme Pieuvre",
              iconName: 'AcademicCapIcon',
              content: [
                { type: 'paragraph', text: "Une fois le besoin principal identifié avec la bête à cornes (c'est la fonction globale), on va détailler un peu plus. Un objet ne fait pas qu'une seule chose ! Il doit aussi respecter certaines règles. Pour visualiser tout ça, on utilise le diagramme 'pieuvre'." },
                { type: 'paragraph', text: "Imagine ton objet au centre d'une toile d'araignée. Chaque fil le relie à un élément de son environnement (l'utilisateur, l'air, le sol, d'autres objets...). Ces fils représentent :" },
                { type: 'list', items: [
                    "<strong>Les Fonctions Principales (FP) :</strong> Ce sont les actions principales que l'objet doit faire pour l'utilisateur. Par exemple, pour un smartphone, FP1: Permettre de téléphoner.",
                    "<strong>Les Fonctions Contraintes (FC) :</strong> Ce sont les exigences que l'objet doit respecter. Par exemple, FC1: Doit résister aux petites chutes, FC2: Doit avoir une bonne autonomie de batterie."
                ]},
                { type: 'image', src: 'https://picsum.photos/seed/pieuvre/600/350', alt: 'Schéma simplifié d\'un diagramme pieuvre' },
              ],
              examples: [
                {
                  title: 'Exemple: La Trottinette Électrique',
                  description: "Ta trottinette électrique a plusieurs missions :",
                  items: [
                    "<strong>Produit :</strong> Trottinette électrique",
                    "<strong>FP1 :</strong> Permettre à l'utilisateur de se déplacer (relation utilisateur ↔ sol).",
                    "<strong>FP2 :</strong> Permettre à l'utilisateur de la diriger (relation utilisateur ↔ trottinette).",
                    "<strong>FC1 :</strong> Être stable pour la sécurité (relation utilisateur ↔ sol).",
                    "<strong>FC2 :</strong> Résister à une petite pluie (relation trottinette ↔ environnement).",
                    "<strong>FC3 :</strong> Avoir une autonomie de X km (relation utilisateur ↔ batterie)."
                  ],
                  image: 'https://picsum.photos/seed/trottinette/300/200'
                },
                {
                  title: 'Exemple: Une Maison',
                  description: "Une maison, c'est complexe, mais simplifions :",
                  items: [
                    "<strong>Produit :</strong> Maison",
                    "<strong>FP1 :</strong> Permettre aux habitants de s'abriter des intempéries (relation habitants ↔ environnement extérieur).",
                    "<strong>FP2 :</strong> Permettre aux habitants de dormir confortablement (relation habitants ↔ lits/chambres).",
                    "<strong>FC1 :</strong> Être solide et ne pas s'effondrer (relation structure ↔ sol/forces).",
                    "<strong>FC2 :</strong> Respecter les règles d'urbanisme (relation maison ↔ réglementation)."
                  ],
                  image: 'https://picsum.photos/seed/maison/300/200'
                }
              ],
              focusPoint: {
                title: "Le Savais-tu ? Les contraintes sont partout !",
                content: "Même pour un simple crayon, il y a des contraintes ! Il ne doit pas être trop cher (contrainte de coût), doit bien tenir en main (contrainte d'ergonomie), ne pas se casser facilement (contrainte de solidité), et la mine doit écrire correctement (contrainte de performance) !"
              }
            },
            {
                id: 'section3',
                title: "Comment ça marche à l'intérieur ? Fonctions et Solutions Techniques",
                iconName: 'LightBulbIcon',
                content: [
                    { type: 'paragraph', text: "Maintenant qu'on sait ce que l'objet doit faire pour l'utilisateur (fonctions de service FP et FC), on va regarder sous le capot ! Comment l'objet fait-il pour y arriver ? On parle alors de fonctions techniques et de solutions techniques." },
                    { type: 'list', items: [
                        "<strong>Fonction Technique (FT) :</strong> C'est une action interne à l'objet, réalisée par un ou plusieurs de ses composants, qui permet de réaliser une fonction de service. C'est le 'quoi faire' à l'intérieur. Souvent, l'utilisateur ne la voit pas directement. Exemple: pour qu'une voiture freine, une fonction technique est de 'transmettre la force du pied du conducteur aux roues'.",
                        "<strong>Solution Technique (ST) :</strong> C'est le moyen concret, le composant ou l'ensemble de composants choisis par les ingénieurs pour réaliser une fonction technique. C'est le 'comment faire'. Exemple: pour 'transmettre la force', la solution technique peut être un système de câbles, ou un système hydraulique (avec des liquides)."
                    ]},
                    { type: 'image', src: 'https://picsum.photos/seed/ftst/600/300', alt: 'Illustration lien entre Fonction de Service, Fonction Technique et Solution Technique' },
                ],
                examples: [
                    {
                        title: 'Exemple: Freiner une Voiture',
                        description: "Regardons le système de freinage d'une voiture :",
                        items: [
                            "<strong>FP (Fonction Principale) :</strong> Permettre au conducteur de ralentir ou arrêter la voiture.",
                            "<strong>FT1 :</strong> Amplifier l'effort du conducteur sur la pédale.",
                            "<strong>ST1 :</strong> Mastervac (assistance au freinage).",
                            "<strong>FT2 :</strong> Transmettre l'effort de freinage aux roues.",
                            "<strong>ST2 :</strong> Circuit hydraulique (tuyaux, liquide de frein).",
                            "<strong>FT3 :</strong> Créer une friction pour ralentir la rotation des roues.",
                            "<strong>ST3 :</strong> Disques et plaquettes de frein (ou tambours et garnitures)."
                        ],
                        image: 'https://picsum.photos/seed/voiturefrein/300/200'
                    },
                    {
                        title: 'Exemple: Afficher une image sur un Smartphone',
                        description: "Comment ton smartphone affiche tes photos ?",
                        items: [
                            "<strong>FP :</strong> Permettre à l'utilisateur de voir des informations visuelles.",
                            "<strong>FT1 :</strong> Convertir les données numériques de l'image en signaux électriques pour l'écran.",
                            "<strong>ST1 :</strong> Processeur graphique, puces de contrôle de l'écran.",
                            "<strong>FT2 :</strong> Émettre de la lumière colorée et organisée en pixels.",
                            "<strong>ST2 :</strong> Écran (technologie LCD, OLED, etc.).",
                            "<strong>FT3 :</strong> Protéger l'écran des rayures et des chocs légers.",
                            "<strong>ST3 :</strong> Verre renforcé (type Gorilla Glass ou similaire)."
                        ],
                        image: 'https://picsum.photos/seed/smartphonedisplay/300/200'
                    }
                ],
                focusPoint: {
                    title: "Point Focus : Une fonction, plusieurs solutions !",
                    content: "Pour une même fonction technique, il existe souvent plusieurs solutions techniques possibles ! Par exemple, pour la fonction technique 'assembler deux pièces d'un meuble', on peut utiliser des vis et des écrous (solution A), de la colle (solution B), ou des chevilles en bois (solution C). Le choix dépendra du coût, de la solidité voulue, si on veut pouvoir démonter facilement, etc."
                }
            },
            {
                id: 'section4',
                title: "Le Grand Livre des Règles : Le Cahier des Charges Fonctionnel (CdCF)",
                iconName: 'BookOpenIcon',
                content: [
                    { type: 'paragraph', text: "Imagine que tu commandes un gâteau super spécial pour ton anniversaire. Tu vas expliquer au pâtissier exactement ce que tu veux : le goût, la forme, la décoration... Le Cahier des Charges Fonctionnel (CdCF), c'est un peu pareil, mais pour les objets techniques !" },
                    { type: 'paragraph', text: "Le CdCF est un document très important qui rassemble toutes les fonctions (Fonctions Principales et Fonctions Contraintes) que le produit doit remplir. Pour chaque fonction, on précise :" },
                    { type: 'list', items: [
                        "<strong>Le critère d'appréciation :</strong> C'est ce qu'on va mesurer ou observer pour savoir si la fonction est bien remplie (ex: pour la fonction 'être léger', le critère est le 'poids').",
                        "<strong>Le niveau :</strong> C'est la performance qu'on attend pour ce critère (ex: poids < 1 kg). Ce niveau peut être une valeur chiffrée, une description, ou une référence à une norme.",
                        "<strong>La flexibilité :</strong> Est-ce que ce niveau est absolument obligatoire, ou peut-on être un peu souple ? (ex: Impératif, Négociable, Souhaitable)."
                    ]},
                    { type: 'paragraph', text: "Le CdCF, c'est comme un contrat entre celui qui demande l'objet (le client) et celui qui va le fabriquer (le concepteur). Il permet de s'assurer que tout le monde est d'accord avant de commencer le travail, et d'éviter les mauvaises surprises !" },
                    { type: 'image', src: 'https://picsum.photos/seed/cdcf/600/300', alt: 'Exemple simplifié d\'un Cahier des Charges Fonctionnel' },
                ],
                examples: [
                    {
                        title: 'Extrait d\'un CdCF pour une Nouvelle Trottinette Électrique pour Ados',
                        description: "",
                        items: [
                            "<strong>FP1 : Transporter une personne en toute sécurité.</strong><br/> - Critère : Poids maximal de l'utilisateur. Niveau : 90 kg. Flexibilité : Impératif.<br/> - Critère : Vitesse maximale. Niveau : 25 km/h (selon réglementation). Flexibilité : Impératif.",
                            "<strong>FP2 : Avoir une autonomie suffisante.</strong><br/> - Critère : Distance parcourable sur une charge. Niveau : Au moins 20 km. Flexibilité : Négociable (minimum 18 km).",
                            "<strong>FC1 : Être facilement transportable (pliée).</strong><br/> - Critère : Poids total de la trottinette. Niveau : Moins de 12 kg. Flexibilité : Souhaitable.<br/> - Critère : Dimensions une fois pliée. Niveau : Tient dans un coffre de petite voiture. Flexibilité : Important.",
                            "<strong>FC2 : Coûter moins de X euros.</strong><br/> - Critère : Prix de vente public. Niveau : Moins de 350€. Flexibilité : Impératif."
                        ],
                    },
                    {
                        title: 'Extrait d\'un CdCF pour une Application Mobile de Jeu Éducatif',
                        description: "",
                        items: [
                            "<strong>FP1 : Permettre à l'élève d'apprendre en s'amusant.</strong><br/> - Critère : Taux de bonnes réponses aux quiz. Niveau : > 70% après 3 sessions. Flexibilité : Souhaitable.<br/> - Critère : Temps moyen passé sur l'appli par session. Niveau : 10-15 minutes. Flexibilité : Négociable.",
                            "<strong>FC1 : Fonctionner sur les smartphones courants.</strong><br/> - Critère : Compatibilité OS. Niveau : Android 8+ et iOS 13+. Flexibilité : Impératif.",
                            "<strong>FC2 : Être intuitive et facile à utiliser pour un enfant de 10-12 ans.</strong><br/> - Critère : Temps pour comprendre le but du jeu principal. Niveau : Moins de 2 minutes sans aide. Flexibilité : Important."
                        ]
                    }
                ],
                focusPoint: {
                    title: "Le Savais-tu ? Un CdCF peut faire des dizaines de pages !",
                    content: "Pour des objets très complexes comme une fusée Ariane, une voiture de Formule 1 ou un nouveau smartphone haut de gamme, le cahier des charges est un document énorme, parfois de plusieurs centaines de pages ! Il détaille des milliers de fonctions et de contraintes très précises. Chaque détail compte pour la sécurité, la performance et la réussite du projet !"
                }
            }
        ];

        const glossaryData = [
            { term: "Analyse fonctionnelle", definition: "Méthode pour comprendre à quoi sert un objet et comment il fonctionne en étudiant ses fonctions." },
            { term: "Besoin", definition: "Ce qui est nécessaire ou désiré par un utilisateur, et que l'objet technique cherche à satisfaire." },
            { term: "Bête à cornes", definition: "Outil graphique simple pour exprimer le besoin fondamental auquel répond un produit (À qui rend-il service ? Sur quoi agit-il ? Dans quel but ?)." },
            { term: "Cahier des Charges Fonctionnel (CdCF)", definition: "Document qui décrit précisément toutes les fonctions qu'un produit doit remplir et les performances (niveaux) attendues pour chacune, avec leur flexibilité." },
            { term: "Contrainte (Fonction Contrainte FC)", definition: "Exigence ou limite que le produit doit respecter (ex: sécurité, coût, esthétique, normes, environnement)." },
            { term: "Critère d'appréciation", definition: "Caractéristique observable ou mesurable qui permet de juger si une fonction est bien remplie (ex: la 'poids' pour la fonction 'être léger')." },
            { term: "Diagramme pieuvre (ou diagramme des interacteurs)", definition: "Schéma qui montre les relations entre un produit (au centre) et les éléments de son environnement, illustrant ses fonctions principales et contraintes." },
            { term: "Flexibilité (d'un niveau)", definition: "Indique si un niveau de performance pour une fonction est obligatoire (impératif), peut être discuté (négociable) ou est simplement un plus (souhaitable)." },
            { term: "Fonction d'usage (ou globale)", definition: "La raison principale pour laquelle l'objet a été créé ; ce à quoi il sert globalement pour l'utilisateur. C'est la réponse à la question 'Dans quel but ?' de la bête à cornes." },
            { term: "Fonction Principale (FP)", definition: "Action que le produit doit réaliser pour satisfaire directement un besoin de l'utilisateur." },
            { term: "Fonction de service", definition: "Ensemble des actions attendues d'un produit pour répondre à un besoin de l'utilisateur. Comprend les fonctions principales (FP) et les fonctions contraintes (FC)." },
            { term: "Fonction technique (FT)", definition: "Action interne à l'objet, réalisée par un ou plusieurs composants (solutions techniques), pour assurer une ou plusieurs fonctions de service." },
            { term: "Matière d'œuvre (M.O.)", definition: "Ce sur quoi le produit agit pour remplir sa fonction (ex: l'air pour un ventilateur, les aliments pour un réfrigérateur, l'information pour un ordinateur)." },
            { term: "Niveau (de performance)", definition: "Valeur ou description de la performance attendue pour un critère d'appréciation (ex: poids < 500g ; autonomie > 10 heures)." },
            { term: "Solution technique (ST)", definition: "Moyen concret (composant, assemblage de composants, technologie, matériau) choisi pour réaliser une fonction technique." }
        ];

        const quizQuestions = [
            {
              question: "Dans la 'bête à cornes' pour un vélo, 'Permettre au cycliste de se déplacer' est...",
              options: [ { text: "L'utilisateur", id: "q1o1" }, { text: "La matière d'œuvre", id: "q1o2" }, { text: "La fonction globale", id: "q1o3" } ],
              correctAnswerId: "q1o3",
              feedback: "Correct ! C'est le but principal du vélo, sa fonction globale."
            },
            {
              question: "La couleur rouge d'une voiture de sport est principalement une...",
              options: [ { text: "Fonction Principale (FP)", id: "q2o1" }, { text: "Fonction Contrainte (FC)", id: "q2o2" }, { text: "Solution Technique (ST)", id: "q2o3" } ],
              correctAnswerId: "q2o2",
              feedback: "Bien vu ! La couleur est liée à l'esthétique, c'est donc une Fonction Contrainte. Une FP serait 'transporter des passagers'."
            },
            {
              question: "Dans un Cahier des Charges (CdCF), le 'niveau' pour une fonction 'être étanche' pourrait être :",
              options: [ { text: "'Très important'", id: "q3o1" }, { text: "'Résister à une immersion sous 1m d'eau pendant 30 min (IP67)'", id: "q3o2" }, { text: "'Utiliser un joint en caoutchouc'", id: "q3o3" } ],
              correctAnswerId: "q3o2",
              feedback: "Exactement ! Le niveau précise la performance attendue. 'Très important' est une flexibilité, et 'joint en caoutchouc' une solution technique."
            },
            {
              question: "Pour un smartphone, la 'batterie au lithium-ion' est un exemple de :",
              options: [ { text: "Fonction Principale (FP) : Stocker l'énergie", id: "q4o1" }, { text: "Fonction Technique (FT) : Convertir l'énergie chimique en énergie électrique", id: "q4o2" }, { text: "Solution Technique (ST) pour la FT 'stocker l'énergie électrique'", id: "q4o3" } ],
              correctAnswerId: "q4o3",
              feedback: "C'est ça ! La batterie est la solution choisie pour stocker l'énergie. La FT serait de stocker de l'énergie, et une FP serait 'avoir une autonomie suffisante'."
            }
        ];

        const conclusionData = {
          summary: "Voilà, tu as découvert les outils des designers et ingénieurs ! La 'bête à cornes' pour bien cerner le besoin, le 'diagramme pieuvre' pour lister tout ce que l'objet doit faire et respecter, et le 'cahier des charges' comme un contrat super précis. Tu sais maintenant qu'avant de dessiner ou construire, il faut analyser : décomposer le problème en fonctions simples (fonctions de service, fonctions techniques) pour ensuite trouver les meilleures solutions techniques.",
          opening: "Ces outils ne servent pas qu'aux ingénieurs ! Tu peux les utiliser pour tes propres projets, pour organiser une fête, ou même pour choisir ton prochain smartphone en listant tes besoins et contraintes. Dans les prochains modules, nous verrons comment on choisit concrètement les matériaux et les énergies pour donner vie à ces solutions techniques !",
          reflectionQuestion: "Si tu devais inventer un objet révolutionnaire pour faciliter la vie des collégiens à l'école, quelle serait sa fonction globale et deux fonctions contraintes importantes selon toi ?"
        };

        // --- ICON FUNCTIONS ---
        // Each function returns an SVG string. Props like className can be passed.
        function Icon(pathDs, props = { className: "w-6 h-6" }) {
            return `<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="${props.className || 'w-6 h-6'}">
                        ${pathDs.map(d => `<path stroke-linecap="round" stroke-linejoin="round" d="${d}" />`).join('')}
                    </svg>`;
        }
        const Icons = {
            LightBulbIcon: (props) => Icon(["M12 18v-5.25m0 0a6.01 6.01 0 0 0 1.5-.189m-1.5.189a6.01 6.01 0 0 1-1.5-.189m3.75 7.478a12.06 12.06 0 0 1-4.5 0m3.75 2.354a12.049 12.049 0 0 1-4.5 0M12 3c-3.039 0-5.5 2.46-5.5 5.5 0 2.048.999 4.018 2.803 5.038L12 21l2.697-7.462A5.503 5.503 0 0 0 17.5 8.5C17.5 5.46 15.039 3 12 3Z"], props),
            BookOpenIcon: (props) => Icon(["M12 6.042A8.967 8.967 0 0 0 6 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 0 1 6 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 0 1 6-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0 0 18 18a8.967 8.967 0 0 0-6-2.292m0 0V21M12 6.042A8.967 8.967 0 0 1 18 3.75m-6 2.292A8.967 8.967 0 0 0 6 3.75"], props),
            QuestionMarkCircleIcon: (props) => Icon(["M9.879 7.519c1.171-1.025 3.071-1.025 4.242 0 1.172 1.025 1.172 2.687 0 3.712-.203.179-.43.326-.67.442-.745.361-1.45.999-1.45 1.827v.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 5.25h.008v.008H12v-.008Z"], props),
            AcademicCapIcon: (props) => Icon(["M4.26 10.147a60.438 60.438 0 0 0-.491 6.347A48.627 48.627 0 0 1 12 20.904a48.627 48.627 0 0 1 8.232-4.41 60.46 60.46 0 0 0-.491-6.347m-15.482 0a50.57 50.57 0 0 0-2.658-.813A59.906 59.906 0 0 1 12 3.493a59.903 59.903 0 0 1 10.399 5.84c-.896.248-1.783.52-2.658.814m-15.482 0A50.697 50.697 0 0 1 12 13.489a50.702 50.702 0 0 1 7.74-3.342M6.75 15a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Zm0 0v-3.675A55.378 55.378 0 0 1 12 8.443m-7.007 11.55A5.981 5.981 0 0 0 6.75 15.75v-1.5"], props),
            ChevronDownIcon: (props) => Icon(["m19.5 8.25-7.5 7.5-7.5-7.5"], {className: props.className || "w-5 h-5"}),
            ChevronUpIcon: (props) => Icon(["m4.5 15.75 7.5-7.5 7.5 7.5"], {className: props.className || "w-5 h-5"}),
            CheckCircleIcon: (props) => Icon(["M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"], {className: props.className || "inline w-5 h-5 ml-2"}),
            XCircleIcon: (props) => Icon(["m9.75 9.75 4.5 4.5m0-4.5-4.5 4.5M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"], {className: props.className || "inline w-5 h-5 ml-2"}),
            ChatBubbleBottomCenterTextIcon: (props) => Icon(["M18 18.72a9.094 9.094 0 0 0 3.741-.479 3 3 0 0 0-3.741-5.197m-15 0A3 3 0 0 1 3 13.044M3 13.044a9.091 9.091 0 0 1 3.741-.479m0 0c1.313 0 2.533.253 3.586.698M6.741 12.565A9.095 9.095 0 0 1 12 12.018m0 0c2.605 0 4.981.745 6.858 2.015M12 12.018V18.72m0-6.702c.191.163.38.328.557.506m-6.858 2.015A9.095 9.095 0 0 0 3 13.044m5.741-1.175a9.095 9.095 0 0 0-3.741.479M15 12.018c1.313 0 2.533.253 3.586.698m0 0A9.095 9.095 0 0 1 21 13.044m-3-1.026a9.091 9.091 0 0 0-3.741-.479M15 12.018"], props),
            SparklesIcon: (props) => Icon(["M9.813 15.904 9 18.75l-.813-2.846a4.5 4.5 0 0 0-3.09-3.09L1.25 12l2.846-.813a4.5 4.5 0 0 0 3.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 0 0 3.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 0 0-3.09 3.09ZM18.25 7.5l.813 2.846a4.5 4.5 0 0 1 3.09 3.09L24.75 12l-2.846.813a4.5 4.5 0 0 1-3.09 3.09L18.25 19.5l-.813-2.846a4.5 4.5 0 0 1-3.09-3.09L11.25 12l2.846-.813a4.5 4.5 0 0 1 3.09-3.09Z"], props),
            BeakerIcon: (props) => Icon(["M14.25 6.083c-.09.005-.18.005-.27.005H7.582c-.347 0-.686.045-1.02.132A2.24 2.24 0 0 0 4.5 8.305V19.5A2.25 2.25 0 0 0 6.75 21.75h10.5A2.25 2.25 0 0 0 19.5 19.5V8.305a2.24 2.24 0 0 0-2.062-2.172c-.334-.087-.673-.132-1.02-.132-.09 0-.18-.005-.27-.005h-.094ZM7.5 15h9M7.5 12h9m-8.976-3.187c.308-.012.618-.012.927-.012h6.098c.309 0 .62.012.927.012M7.5 6.083c.09-.005.18-.005.27-.005H6.75A2.25 2.25 0 0 0 4.5 8.333v.046M16.5 6.083c-.09-.005-.18-.005-.27-.005h.27A2.25 2.25 0 0 1 19.5 8.333v.046"], props),
        };

        // --- RENDER FUNCTIONS ---
        function renderIntroduction() {
            const { hook, objectives, knowledge } = introductionData;
            const html = `
                <section aria-labelledby="introduction-title" class="bg-white p-6 rounded-xl shadow-lg border border-sky-200">
                    <h2 id="introduction-title" class="text-2xl font-bold text-custom-blue mb-4">Bienvenue dans ce nouveau module !</h2>
                    <p class="text-lg italic text-slate-700 mb-6">${hook}</p>
                    <div class="grid md:grid-cols-2 gap-6">
                        <div class="bg-sky-50 p-4 rounded-lg shadow-sm border border-sky-100">
                            <h3 class="text-xl font-semibold text-sky-700 mb-3 flex items-center">
                                ${Icons.AcademicCapIcon({ className: "w-6 h-6 mr-2 text-sky-600" })}
                                Objectifs d'apprentissage
                            </h3>
                            <p class="mb-2 text-sm text-slate-600">À la fin de ce module, tu seras capable de :</p>
                            <ul class="list-disc list-inside space-y-1 text-slate-700">
                                ${objectives.map(obj => `<li>${obj}</li>`).join('')}
                            </ul>
                        </div>
                        <div class="bg-emerald-50 p-4 rounded-lg shadow-sm border border-emerald-100">
                            <h3 class="text-xl font-semibold text-emerald-700 mb-3 flex items-center">
                                ${Icons.LightBulbIcon({ className: "w-6 h-6 mr-2 text-emerald-600" })}
                                Connaissances clés
                            </h3>
                            <p class="mb-2 text-sm text-slate-600">Tu vas découvrir et comprendre :</p>
                            <ul class="list-disc list-inside space-y-1 text-slate-700">
                                ${knowledge.map(know => `<li>${know}</li>`).join('')}
                            </ul>
                        </div>
                    </div>
                </section>
            `;
            document.getElementById('introduction-container').innerHTML = html;
        }

        function renderFocusPoint(focusPoint, sectionId, index) {
            if (!focusPoint) return '';
            const contentId = `focus-content-${sectionId}-${index}`;
            return `
                <div class="mt-8">
                    <div class="bg-yellow-50 border-l-4 border-accent-yellow text-yellow-800 p-4 rounded-md shadow">
                        <button
                            onclick="toggleFocusPoint('${contentId}')"
                            class="w-full flex justify-between items-center text-left font-semibold text-lg focus:outline-none"
                            aria-expanded="false"
                            aria-controls="${contentId}"
                        >
                            <span class="flex items-center">
                                ${Icons.LightBulbIcon({ className: "w-6 h-6 mr-2 text-yellow-500" })}
                                ${focusPoint.title}
                            </span>
                            <span id="chevron-${contentId}">
                                ${Icons.ChevronDownIcon({className: "w-5 h-5"})}
                            </span>
                        </button>
                        <div id="${contentId}" class="mt-3 text-yellow-700 prose prose-sm max-w-none focus-content">
                            <p>${focusPoint.content}</p>
                        </div>
                    </div>
                </div>
            `;
        }
        
        function renderSections() {
            let html = '';
            sectionsData.forEach((section, sectionIndex) => {
                html += `
                    <section aria-labelledby="${section.id}" class="bg-white p-6 rounded-xl shadow-lg border border-slate-200">
                        <h2 id="${section.id}" class="text-2xl font-bold text-custom-blue mb-6 flex items-center">
                            ${section.iconName && Icons[section.iconName] ? `<span class="mr-3">${Icons[section.iconName]({ className: `w-8 h-8 ${section.iconName === 'QuestionMarkCircleIcon' ? 'text-custom-blue': section.iconName === 'AcademicCapIcon' ? 'text-custom-green' : section.iconName === 'LightBulbIcon' ? 'text-custom-orange' : 'text-indigo-600' }`})}</span>` : ''}
                            ${section.title}
                        </h2>
                        <div class="space-y-4 text-slate-700 leading-relaxed prose max-w-none">
                            ${section.content.map(item => {
                                if (item.type === 'paragraph') return `<p>${item.text}</p>`;
                                if (item.type === 'list') return `<ul class="list-disc list-inside space-y-1 pl-4">${item.items.map(li => `<li class="text-slate-700">${li}</li>`).join('')}</ul>`;
                                if (item.type === 'image' && item.src) return `<div class="my-4 text-center"><img src="${item.src}" alt="${item.alt || section.title}" class="max-w-full md:max-w-lg mx-auto rounded-lg shadow-md border border-slate-300" />${item.alt ? `<p class="text-sm text-slate-500 mt-1 italic">${item.alt}</p>` : ''}</div>`;
                                return '';
                            }).join('')}
                        </div>

                        ${section.examples && section.examples.length > 0 ? `
                            <div class="mt-8">
                                <h3 class="text-xl font-semibold text-custom-green mb-4 flex items-center">
                                    ${Icons.BeakerIcon({ className: "w-6 h-6 mr-2 text-custom-green" })}
                                    Exemples Concrets
                                </h3>
                                <div class="grid md:grid-cols-1 lg:grid-cols-2 gap-6">
                                    ${section.examples.map(example => `
                                        <div class="bg-green-50 p-4 rounded-lg shadow-sm border border-green-200">
                                            <h4 class="text-lg font-semibold text-green-700 mb-2">${example.title}</h4>
                                            ${example.image ? `<img src="${example.image}" alt="${example.title}" class="w-full h-40 object-cover rounded-md mb-3 shadow"/>` : ''}
                                            <p class="text-sm text-slate-600 mb-2 prose prose-sm max-w-none">${example.description}</p>
                                            <ul class="list-disc list-inside space-y-1 text-sm text-slate-700 prose prose-sm max-w-none">
                                                ${example.items.map(item => `<li>${item}</li>`).join('')}
                                            </ul>
                                        </div>
                                    `).join('')}
                                </div>
                            </div>
                        ` : ''}
                        ${renderFocusPoint(section.focusPoint, section.id, sectionIndex)}
                    </section>
                `;
            });
            document.getElementById('sections-container').innerHTML = html;
        }

        function renderQuiz() {
            const html = `
                <section aria-labelledby="quiz-title" class="bg-white p-6 rounded-xl shadow-lg border border-indigo-200">
                    <h2 id="quiz-title" class="text-2xl font-bold text-indigo-700 mb-6 flex items-center">
                        ${Icons.QuestionMarkCircleIcon({ className: "w-7 h-7 mr-2 text-indigo-700" })}
                        Teste tes connaissances !
                    </h2>
                    <div class="space-y-8">
                        ${quizQuestions.map((q, qIndex) => `
                            <div id="question-${qIndex}" class="p-4 border border-slate-200 rounded-lg bg-indigo-50 shadow-sm">
                                <p class="font-semibold text-lg text-indigo-800 mb-3">${qIndex + 1}. ${q.question}</p>
                                <div class="space-y-2">
                                    ${q.options.map(opt => `
                                        <button
                                            id="q${qIndex}o${opt.id}"
                                            onclick="handleQuizOptionSelect(${qIndex}, '${opt.id}')"
                                            class="w-full text-left p-3 rounded-md border transition-all duration-150 ease-in-out bg-white hover:bg-indigo-100 border-indigo-300 text-slate-700 hover:border-indigo-400"
                                            aria-pressed="false"
                                        >
                                            ${opt.text}
                                        </button>
                                    `).join('')}
                                </div>
                                <div id="feedback-${qIndex}" class="mt-3 p-3 rounded-md text-sm" style="display: none;"></div>
                            </div>
                        `).join('')}
                    </div>
                </section>
            `;
            document.getElementById('quiz-container').innerHTML = html;
        }

        function renderGlossary() {
            const sortedTerms = [...glossaryData].sort((a,b) => a.term.localeCompare(b.term));
            const html = `
                <section aria-labelledby="glossary-title" class="bg-white p-6 rounded-xl shadow-lg border border-slate-200">
                    <h2 id="glossary-title" class="text-2xl font-bold text-custom-blue mb-6 flex items-center">
                        ${Icons.BookOpenIcon({ className: "w-7 h-7 mr-2 text-custom-blue" })}
                        Glossaire du Technologue
                    </h2>
                    <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-x-6 gap-y-4">
                        ${sortedTerms.map(term => `
                            <div class="mb-3 p-3 bg-slate-50 rounded-md border border-slate-100 shadow-sm">
                                <h3 class="font-semibold text-sky-700">${term.term}</h3>
                                <p class="text-sm text-slate-600">${term.definition}</p>
                            </div>
                        `).join('')}
                    </div>
                </section>
            `;
            document.getElementById('glossary-container').innerHTML = html;
        }

        function renderConclusion() {
            const { summary, opening, reflectionQuestion } = conclusionData;
            const html = `
                <section aria-labelledby="conclusion-title" class="bg-white p-6 rounded-xl shadow-lg border border-purple-200">
                    <h2 id="conclusion-title" class="text-2xl font-bold text-purple-700 mb-4">Pour conclure ce module...</h2>
                    <div class="space-y-4 text-slate-700 prose max-w-none">
                        <p>${summary}</p>
                        <p class="text-purple-600 font-medium">${opening}</p>
                    </div>
                    <div class="mt-6 bg-purple-50 p-4 rounded-lg shadow-sm border border-purple-100">
                        <h3 class="text-xl font-semibold text-purple-700 mb-3 flex items-center">
                            ${Icons.ChatBubbleBottomCenterTextIcon({ className: "w-6 h-6 mr-2 text-purple-600" })}
                            À toi de réfléchir !
                        </h3>
                        <p class="italic text-slate-700">${reflectionQuestion}</p>
                    </div>
                    <div class="mt-6 text-center">
                        ${Icons.SparklesIcon({ className: "w-12 h-12 text-accent-yellow inline-block animate-pulse" })}
                        <p class="text-lg font-semibold text-custom-blue mt-2">Bravo pour avoir exploré ce module !</p>
                    </div>
                </section>
            `;
            document.getElementById('conclusion-container').innerHTML = html;
        }

        // --- INTERACTIVITY FUNCTIONS ---
        const quizAnswersState = {};

        function toggleFocusPoint(contentId) {
            const contentElement = document.getElementById(contentId);
            const button = contentElement.previousElementSibling;
            const chevronContainer = document.getElementById(`chevron-${contentId}`);
            const isOpen = contentElement.classList.toggle('open');
            button.setAttribute('aria-expanded', isOpen);
            if (isOpen) {
                 chevronContainer.innerHTML = Icons.ChevronUpIcon({className: "w-5 h-5"});
            } else {
                 chevronContainer.innerHTML = Icons.ChevronDownIcon({className: "w-5 h-5"});
            }
        }

        function handleQuizOptionSelect(qIndex, selectedOptionId) {
            if (quizAnswersState[qIndex]) return; // Already answered

            const question = quizQuestions[qIndex];
            const isCorrect = selectedOptionId === question.correctAnswerId;
            quizAnswersState[qIndex] = { selectedOptionId, isCorrect };

            const feedbackDiv = document.getElementById(`feedback-${qIndex}`);
            feedbackDiv.style.display = 'block';
            
            if (isCorrect) {
                feedbackDiv.className = 'mt-3 p-3 rounded-md text-sm bg-green-100 text-green-700 border border-green-200';
                feedbackDiv.innerHTML = `🥳 Bonne réponse ! ${question.feedback}`;
            } else {
                feedbackDiv.className = 'mt-3 p-3 rounded-md text-sm bg-red-100 text-red-700 border border-red-200';
                feedbackDiv.innerHTML = `🤔 Presque ! ${question.feedback}`;
            }

            question.options.forEach(opt => {
                const button = document.getElementById(`q${qIndex}o${opt.id}`);
                button.disabled = true;
                button.setAttribute('aria-pressed', opt.id === selectedOptionId);
                button.classList.remove('hover:bg-indigo-100', 'hover:border-indigo-400');

                if (opt.id === selectedOptionId) {
                    button.classList.add(isCorrect ? 'bg-green-500 text-white border-green-600 ring-2 ring-green-400' : 'bg-red-500 text-white border-red-600 ring-2 ring-red-400');
                    button.innerHTML += isCorrect ? Icons.CheckCircleIcon() : Icons.XCircleIcon();
                } else if (opt.id === question.correctAnswerId && !isCorrect) {
                    button.classList.add('bg-green-200', 'border-green-300', 'text-green-800');
                     button.innerHTML += Icons.CheckCircleIcon(); // Show correct if wrong one selected
                } else {
                     button.classList.add('opacity-75'); // Dim other options
                }
            });
        }

        // --- INITIALIZATION ---
        document.addEventListener('DOMContentLoaded', () => {
            renderIntroduction();
            renderSections();
            renderQuiz();
            renderGlossary();
            renderConclusion();
        });
    </script>
</body>
</html>
